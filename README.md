# memqueue
InMemory queue (linux kernel module)

Необходимо реализовать:
1. Загружаемый модуль ядра, который хранит в оперативной памяти очередь произвольных сообщений. Объем памяти занимаемый очередью не может превышать заданного размера. Очередь должна асинхронно сохраняться в файловую систему с целью восстановления состояния после остановки/старта.
2. User-mode демон, который вычитывает сообщения из очереди и помещает в файловое хранилище.

Решение основано на "кольцевом" буфере, в начале которого хранится заголовок с позициями чтения и записи. Буфер в памяти "проецируется" на файл /var/tmp/memqueue.

Файл /dev/memqueue необходимо создать командой "sudo mknod -m 0666 /dev/memqueue c <MAJOR> 0". Значение <MAJOR> необходимо взять из dmesg. При загрузке модуля в dmesg выводится сообщение: "memqueue module registered with device major number <MAJOR>".

User-mode демон необходимо запускать с указанием полного пути к файловому хранилищу, например: "./memqueue_daemon /var/tmp". Файлы будут создаваться с именами "memqueue_elem_<counter>". Остановка демона осуществляется командой "pkill memqueue_daemon". Логи сохраняются в syslog.

Запись в очередь:
cat file /dev/memqueue
dd if=file of=/dev/memqueue bs=size count=1

Чтение из очереди:
dd if=/dev/memqueue of=file bs=size count=1

